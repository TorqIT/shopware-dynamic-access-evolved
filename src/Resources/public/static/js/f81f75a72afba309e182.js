(window["webpackJsonpPlugintorq-dynamic-access-evolved"]=window["webpackJsonpPlugintorq-dynamic-access-evolved"]||[]).push([[465],{315:function(){},465:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return i}}),n(856);let{Mixin:t}=Shopware,{Criteria:s}=Shopware.Data;var i={template:'<sw-page class="torq-dynamic-access-evolved-detail">\n\n    <template #smart-bar-header>\n        <h2>{{ placeholder(dae, \'name\', $tc(\'torq-dynamic-access-evolved.detail.header.titleEdit\')) }}</h2>\n    </template>\n\n    <template #smart-bar-actions>\n\n        <sw-button\n            v-tooltip.bottom="tooltipCancel"\n            class="torq-dynamic-access-evolved-detail__cancel-action"\n            :disabled="dae !== null || undefined"\n            @click="onCancel"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n\n        <sw-button-process\n            v-model:processSuccess="isSaveSuccessful"\n            v-tooltip.bottom="tooltipSave"\n            class="torq-dynamic-access-evolved-detail__save-action"\n            variant="primary"\n            :is-loading="isLoading"\n            :disabled="isLoading || undefined"\n            :process-success="isSaveSuccessful"\n            @update:process-success="saveFinish"\n            @click.prevent="onSave"\n        >\n            {{ $tc(\'global.default.save\') }}\n        </sw-button-process>\n\n    </template>\n\n    {# <template #language-switch>\n        <sw-language-switch\n            :disabled="!promotionId || undefined"\n            @on-change="onChangeLanguage"\n        />\n    </template> #}\n\n    <template #content>\n        <sw-card\n        v-if="dae"\n        position-identifier="torq-dynamic-access-evolved-detail-general"\n        class="torq-dynamic-access-evolved-detail__card-general"\n        :is-loading="isLoading"\n        :title="$tc(\'torq-dynamic-access-evolved.detail.general.cardTitle\')"\n    >\n\n        <sw-container\n            columns="2fr 1fr"\n            gap="0 32px"\n        >\n            <sw-text-field\n                v-model:value="dae.name"\n                class="torq-dynamic-access-evolved-detail__field-name"\n                :label="$tc(\'torq-dynamic-access-evolved.detail.general.nameLabel\')"\n                {# :disabled="!acl.can(\'promotion.editor\')" #}\n                required\n                :placeholder="placeholder(dae, \'name\', $tc(\'torq-dynamic-access-evolved.detail.general.namePlaceholder\'))"\n            />\n\n        </sw-container>\n\n        <sw-container\n            columns="1fr 1fr"\n            gap="0 32px"\n        >\n\n            <sw-datepicker\n                v-model:value="dae.validFrom"\n                class="torq-dynamic-access-evolved-detail__field-valid-from"\n                date-type="datetime"\n                :label="$tc(\'torq-dynamic-access-evolved.detail.general.validFromLabel\')"\n                :placeholder="$tc(\'torq-dynamic-access-evolved.detail.general.validFromPlaceholder\')"\n                {# :disabled="!acl.can(\'promotion.editor\')" #}\n            />\n            <sw-datepicker\n                v-model:value="dae.validUntil"\n                class="torq-dynamic-access-evolved-detail__field-valid-until"\n                date-type="datetime"\n                :label="$tc(\'torq-dynamic-access-evolved.detail.general.validUntilLabel\')"\n                :placeholder="$tc(\'torq-dynamic-access-evolved.detail.general.validUntilPlaceholder\')"\n                {# :disabled="!acl.can(\'promotion.editor\')" #}\n            />\n\n        </sw-container>\n\n        <sw-switch-field\n            v-model:value="dae.active"\n            class="torq-dynamic-access-evolved-detail__field-active"\n            :label="$tc(\'torq-dynamic-access-evolved.detail.general.activeLabel\')"\n            {# :disabled="!acl.can(\'promotion.editor\')" #}\n            bordered\n        />\n    </sw-card>\n\n\n    <sw-card\n        v-if="dae && dae.filter"\n        position-identifier="torq-dynamic-access-evolved-detail-conditions"\n        class="torq-dynamic-access-evolved-detail__card-conditions"\n        :is-loading="isLoading"\n        :title="$tc(\'torq-dynamic-access-evolved.detail.conditions.cardTitle\')"\n    >\n        <torq-dynamic-access-evolved-sales-channel-select\n            v-if="dae"\n            v-model:collection="dae.daeSalesChannels"\n            :local-mode="dae.isNew()"\n            :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.salesChannel.labelSalesChannelSelect\')"\n            :placeholder="$tc(\'torq-dynamic-access-evolved.detail.conditions.salesChannel.placeholderSalesChannelSelect\')"\n        />\n\n        <torq-dynamic-access-evolved-rule-select\n            v-if="dae"\n            v-model:collection="dae.daeCustomerRules"\n            :local-mode="dae.isNew()"\n            :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.customerRules.labelCustomerSelect\')"\n            :placeholder="$tc(\'torq-dynamic-access-evolved.detail.conditions.customerRules.placeholderCustomerSelect\')"\n            :rule-scope="[\'checkout\']"\n            rule-aware-group-key="torq-dynamic-access-evolved-customers"\n        />\n\n        <sw-switch-field name="linkToManufacturerLink" \n            v-model:value="dae.canOnlyAccess"\n            :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.labelCanOnlyAccess\')"\n        />\n\n        <span class="torq-dynamic-access-evolved-detail__can-only-access-label">\n            <strong>{{ canAccessLabel }}</strong>\n        </span>\n\n\n        <torq-dynamic-access-evolved-or-container\n            :filter="dae.filter"\n        />\n                \n    </sw-card>\n        \n    </template>\n\n</sw-page>',inject:["repositoryFactory","acl"],mixins:[t.getByName("listing"),"placeholder"],props:{daeId:{type:String,required:!1,default(){return null}}},data(){return{isLoading:!1,dae:null,isSaveSuccessful:!1}},metaInfo(){return{title:this.$createTitle(this.identifier)}},computed:{identifier(){return this.placeholder(this.dae,"name")},daeRepository(){return this.repositoryFactory.create("torq_dynamic_access_evolved")},isCreateMode(){return"sw.promotion.v2.create.base"===this.$route.name},daeCriteria(){return new s(1,1)},tooltipSave(){let e=this.$device.getSystemKey();return{message:`${e} + S`,appearance:"light"}},tooltipCancel(){return{message:"ESC",appearance:"light"}},canAccessLabel(){return this.dae?!0===this.dae.canOnlyAccess?this.$tc("torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.canAccess"):this.$tc("torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.cannotAccess"):""}},watch:{daeId(){this.createdComponent()},dae:function(e){e&&!e.filter&&(e.filter=s.multi("OR",[]))}},created(){this.createdComponent()},methods:{createdComponent(){if(Shopware.ExtensionAPI.publishData({id:"torq-dynamic-access-evolved__dae",path:"torq_dynamic_access_evolved",scope:this}),this.isLoading=!0,!this.daeId){this.dae=this.daeRepository.create(),this.isLoading=!1;return}this.loadEntityData()},loadEntityData(){return this.daeId?this.daeRepository.get(this.daeId,Shopware.Context.api,this.daeCriteria).then(e=>{if(null!==e&&(this.dae=e,!this.dae||this.dae.length<1))return}).finally(()=>{this.isLoading=!1}):Promise.resolve()},onSave(){if(!this.daeId){this.createDae();return}this.saveDae()},createDae(){return this.saveDae().then(()=>{this.$router.push({name:"torq.dynamic.access.evolved.detail",params:{id:this.dae.id}})})},async saveDae(){this.isLoading=!0;try{await this.daeRepository.save(this.dae),this.isSaveSuccessful=!0,await this.loadEntityData()}catch(e){this.isLoading=!1,this.createNotificationError({message:this.$tc("global.notification.notificationSaveErrorMessage",0,{entityName:this.dae.name})})}finally{}},saveFinish(){this.isSaveSuccessful=!1},onCancel(){this.$router.push({name:"torq.dynamic.access.evolved.list"})}}}},856:function(e,a,n){var t=n(315);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),n(346).Z("b95e0884",t,!0,{})},346:function(e,a,n){"use strict";function t(e,a){for(var n=[],t={},s=0;s<a.length;s++){var i=a[s],c=i[0],o={id:e+":"+s,css:i[1],media:i[2],sourceMap:i[3]};t[c]?t[c].parts.push(o):n.push(t[c]={id:c,parts:[o]})}return n}n.d(a,{Z:function(){return m}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},c=s&&(document.head||document.getElementsByTagName("head")[0]),o=null,l=0,d=!1,r=function(){},v=null,u="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,a,n,s){d=n,v=s||{};var c=t(e,a);return h(c),function(a){for(var n=[],s=0;s<c.length;s++){var o=i[c[s].id];o.refs--,n.push(o)}a?h(c=t(e,a)):c=[];for(var s=0;s<n.length;s++){var o=n[s];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete i[o.id]}}}}function h(e){for(var a=0;a<e.length;a++){var n=e[a],t=i[n.id];if(t){t.refs++;for(var s=0;s<t.parts.length;s++)t.parts[s](n.parts[s]);for(;s<n.parts.length;s++)t.parts.push(y(n.parts[s]));t.parts.length>n.parts.length&&(t.parts.length=n.parts.length)}else{for(var c=[],s=0;s<n.parts.length;s++)c.push(y(n.parts[s]));i[n.id]={id:n.id,refs:1,parts:c}}}}function f(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function y(e){var a,n,t=document.querySelector("style["+u+'~="'+e.id+'"]');if(t){if(d)return r;t.parentNode.removeChild(t)}if(p){var s=l++;a=b.bind(null,t=o||(o=f()),s,!1),n=b.bind(null,t,s,!0)}else a=w.bind(null,t=f()),n=function(){t.parentNode.removeChild(t)};return a(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap)&&a(e=t):n()}}var g=function(){var e=[];return function(a,n){return e[a]=n,e.filter(Boolean).join("\n")}}();function b(e,a,n,t){var s=n?"":t.css;if(e.styleSheet)e.styleSheet.cssText=g(a,s);else{var i=document.createTextNode(s),c=e.childNodes;c[a]&&e.removeChild(c[a]),c.length?e.insertBefore(i,c[a]):e.appendChild(i)}}function w(e,a){var n=a.css,t=a.media,s=a.sourceMap;if(t&&e.setAttribute("media",t),v.ssrId&&e.setAttribute(u,a.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);