(window["webpackJsonpPlugintorq-dynamic-access-evolved"]=window["webpackJsonpPlugintorq-dynamic-access-evolved"]||[]).push([[465],{315:function(){},465:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}}),t(856);let{Mixin:n}=Shopware,{Criteria:s}=Shopware.Data;var i={template:'<sw-page class="torq-dynamic-access-evolved-detail">\n\n	<template #smart-bar-header>\n		<h2>{{ placeholder(dae, \'name\', $tc(\'torq-dynamic-access-evolved.detail.header.titleEdit\')) }}</h2>\n	</template>\n\n	<template #smart-bar-actions>\n		<sw-button v-tooltip.bottom="tooltipCancel" class="torq-dynamic-access-evolved-detail__cancel-action" :disabled="dae !== null || undefined" @click="onCancel">\n			{{ $tc(\'global.default.cancel\') }}\n		</sw-button>\n\n		<sw-button-process \n            v-model:processsuccess="isSaveSuccessful" \n            v-tooltip.bottom="tooltipSave" \n            class="torq-dynamic-access-evolved-detail__save-action" \n            variant="primary" \n            :is-loading="isLoading" \n            :disabled="isLoading || !acl.can(\'torq_dynamic_access_evolved.editor\') || undefined" \n            :process-success="isSaveSuccessful" \n            @update:process-success="saveFinish" \n            @click.prevent="onSave">\n			{{ $tc(\'global.default.save\') }}\n		</sw-button-process>\n	</template>\n\n	<template #content>\n\n		<sw-card v-if="dae" position-identifier="torq-dynamic-access-evolved-detail-general" class="torq-dynamic-access-evolved-detail__card-general" :is-loading="isLoading" :title="$tc(\'torq-dynamic-access-evolved.detail.general.cardTitle\')">\n			<sw-container columns="2fr 1fr" gap="0 32px">\n				<sw-text-field \n                    v-model:value="dae.name" \n                    class="torq-dynamic-access-evolved-detail__field-name" \n                    :label="$tc(\'torq-dynamic-access-evolved.detail.general.nameLabel\')" \n                    :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')" \n                    required :placeholder="placeholder(dae, \'name\', $tc(\'torq-dynamic-access-evolved.detail.general.namePlaceholder\'))"\n                />\n			</sw-container>\n			<sw-container columns="1fr 1fr" gap="0 32px">\n				<sw-datepicker \n                    v-model:value="dae.validFrom" \n                    class="torq-dynamic-access-evolved-detail__field-valid-from" \n                    date-type="datetime" \n                    :label="$tc(\'torq-dynamic-access-evolved.detail.general.validFromLabel\')" \n                    :placeholder="$tc(\'torq-dynamic-access-evolved.detail.general.validFromPlaceholder\')" \n                    :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')"\n                />\n				<sw-datepicker \n                    v-model:value="dae.validUntil" \n                    class="torq-dynamic-access-evolved-detail__field-valid-until" \n                    date-type="datetime" \n                    :label="$tc(\'torq-dynamic-access-evolved.detail.general.validUntilLabel\')" \n                    :placeholder="$tc(\'torq-dynamic-access-evolved.detail.general.validUntilPlaceholder\')" \n                    :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')"\n                />\n			</sw-container>\n			<sw-switch-field \n                v-model:value="dae.active" \n                class="torq-dynamic-access-evolved-detail__field-active" \n                :label="$tc(\'torq-dynamic-access-evolved.detail.general.activeLabel\')" \n                :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')" \n                bordered\n            />\n		</sw-card>\n\n		<sw-card v-if="dae && dae.filter" position-identifier="torq-dynamic-access-evolved-detail-conditions" class="torq-dynamic-access-evolved-detail__card-conditions" :is-loading="isLoading" :title="$tc(\'torq-dynamic-access-evolved.detail.conditions.cardTitle\')">\n			<torq-dynamic-access-evolved-sales-channel-select \n                v-if="dae" \n                v-model:collection="dae.daeSalesChannels" \n                :local-mode="dae.isNew()" \n                :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.salesChannel.labelSalesChannelSelect\')" \n                :placeholder="$tc(\'torq-dynamic-access-evolved.detail.conditions.salesChannel.placeholderSalesChannelSelect\')"\n                :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')" \n            />\n			<torq-dynamic-access-evolved-rule-select \n                v-if="dae" \n                v-model:collection="dae.daeCustomerRules" \n                :local-mode="dae.isNew()" \n                :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.customerRules.labelCustomerSelect\')" \n                :placeholder="$tc(\'torq-dynamic-access-evolved.detail.conditions.customerRules.placeholderCustomerSelect\')" \n                :rule-scope="[\'dae_product_access\']" \n                rule-aware-group-key="torq-dynamic-access-evolved-customers"\n                :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')" \n            />\n			<sw-switch-field \n                name="linkToManufacturerLink"\n                v-model:value="dae.canOnlyAccess" \n                :label="$tc(\'torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.labelCanOnlyAccess\')"\n                :disabled="!acl.can(\'torq_dynamic_access_evolved.editor\')" \n            />\n			<span class="torq-dynamic-access-evolved-detail__can-only-access-label">\n				<strong>{{ canAccessLabel }}</strong>\n			</span>\n			<torq-dynamic-access-evolved-or-container :filter="dae.filter"/>\n		</sw-card>\n\n	</template>\n</sw-page>\n',inject:["repositoryFactory","acl"],mixins:[n.getByName("listing"),"placeholder"],props:{daeId:{type:String,required:!1,default(){return null}}},data(){return{isLoading:!1,dae:null,isSaveSuccessful:!1}},metaInfo(){return{title:this.$createTitle(this.identifier)}},computed:{identifier(){return this.placeholder(this.dae,"name")},daeRepository(){return this.repositoryFactory.create("torq_dynamic_access_evolved")},isCreateMode(){return"sw.promotion.v2.create.base"===this.$route.name},daeCriteria(){return new s(1,1)},tooltipSave(){let e=this.$device.getSystemKey();return{message:`${e} + S`,appearance:"light"}},tooltipCancel(){return{message:"ESC",appearance:"light"}},canAccessLabel(){return this.dae?!0===this.dae.canOnlyAccess?this.$tc("torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.canAccess"):this.$tc("torq-dynamic-access-evolved.detail.conditions.canOnlyAccess.cannotAccess"):""}},watch:{daeId(){this.createdComponent()},dae:function(e){e&&!e.filter&&(e.filter=s.multi("OR",[]))}},created(){this.createdComponent()},methods:{createdComponent(){if(Shopware.ExtensionAPI.publishData({id:"torq-dynamic-access-evolved__dae",path:"torq_dynamic_access_evolved",scope:this}),this.isLoading=!0,!this.daeId){this.dae=this.daeRepository.create(),this.isLoading=!1;return}this.loadEntityData()},loadEntityData(){return this.daeId?this.daeRepository.get(this.daeId,Shopware.Context.api,this.daeCriteria).then(e=>{if(null!==e&&(this.dae=e,!this.dae||this.dae.length<1))return}).finally(()=>{this.isLoading=!1}):Promise.resolve()},onSave(){if(!this.daeId){this.createDae();return}this.saveDae()},createDae(){return this.saveDae().then(()=>{this.$router.push({name:"torq.dynamic.access.evolved.detail",params:{id:this.dae.id}})})},async saveDae(){this.isLoading=!0;try{await this.daeRepository.save(this.dae),this.isSaveSuccessful=!0,await this.loadEntityData()}catch(e){this.isLoading=!1,this.createNotificationError({message:this.$tc("global.notification.notificationSaveErrorMessage",0,{entityName:this.dae.name})})}finally{}},saveFinish(){this.isSaveSuccessful=!1},onCancel(){this.$router.push({name:"torq.dynamic.access.evolved.list"})}}}},856:function(e,a,t){var n=t(315);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),t(346).Z("b95e0884",n,!0,{})},346:function(e,a,t){"use strict";function n(e,a){for(var t=[],n={},s=0;s<a.length;s++){var i=a[s],c=i[0],d={id:e+":"+s,css:i[1],media:i[2],sourceMap:i[3]};n[c]?n[c].parts.push(d):t.push(n[c]={id:c,parts:[d]})}return t}t.d(a,{Z:function(){return p}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},c=s&&(document.head||document.getElementsByTagName("head")[0]),d=null,l=0,o=!1,r=function(){},v=null,u="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,a,t,s){o=t,v=s||{};var c=n(e,a);return h(c),function(a){for(var t=[],s=0;s<c.length;s++){var d=i[c[s].id];d.refs--,t.push(d)}a?h(c=n(e,a)):c=[];for(var s=0;s<t.length;s++){var d=t[s];if(0===d.refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete i[d.id]}}}}function h(e){for(var a=0;a<e.length;a++){var t=e[a],n=i[t.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](t.parts[s]);for(;s<t.parts.length;s++)n.parts.push(y(t.parts[s]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{for(var c=[],s=0;s<t.parts.length;s++)c.push(y(t.parts[s]));i[t.id]={id:t.id,refs:1,parts:c}}}}function f(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function y(e){var a,t,n=document.querySelector("style["+u+'~="'+e.id+'"]');if(n){if(o)return r;n.parentNode.removeChild(n)}if(m){var s=l++;a=b.bind(null,n=d||(d=f()),s,!1),t=b.bind(null,n,s,!0)}else a=_.bind(null,n=f()),t=function(){n.parentNode.removeChild(n)};return a(e),function(n){n?(n.css!==e.css||n.media!==e.media||n.sourceMap!==e.sourceMap)&&a(e=n):t()}}var g=function(){var e=[];return function(a,t){return e[a]=t,e.filter(Boolean).join("\n")}}();function b(e,a,t,n){var s=t?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(a,s);else{var i=document.createTextNode(s),c=e.childNodes;c[a]&&e.removeChild(c[a]),c.length?e.insertBefore(i,c[a]):e.appendChild(i)}}function _(e,a){var t=a.css,n=a.media,s=a.sourceMap;if(n&&e.setAttribute("media",n),v.ssrId&&e.setAttribute(u,a.id),s&&(t+="\n/*# sourceURL="+s.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}}]);